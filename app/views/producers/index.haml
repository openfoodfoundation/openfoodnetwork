.producers{"ng-controller" => "ProducersCtrl"}
  :javascript
    angular.module('Darkswarm').value('producers', #{render partial: "json/producers", object: @producers})
  -#%pre
    -#{{ Producers.producers | json }}

  #active-table-search.row
    .small-12.columns.text-center
      %p
      %h1 Producers
      %div 
        Select a 
        %ofn-modal{title: "producer"}
          = render partial: "modals/producers"
        from the list below:
        %p

      %input{type: :text, 
      "ng-model" => "query", 
      placeholder: "Search postcode, suburb or hub name...",
      "ng-debounce" => "150",
      "ofn-disable-enter" => true}

  .row{bindonce: true}
    .small-12.columns
      .active_table
        %producer.active_table_node.row{id: "{{producer.path}}",
        "ng-repeat" => "producer in filteredProducers = (Producers.producers | filterProducers:query)",
        "ng-controller" => "ProducerNodeCtrl",
        "ng-class" => "{'closed' : !open(), 'open' : open(), 'inactive' : !producer.active}"}

          .small-12.columns
            = render partial: 'producers/skinny'
            = render partial: 'producers/fat'

= render partial: "shared/footer"